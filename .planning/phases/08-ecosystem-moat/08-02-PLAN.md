---
phase: 8
plan: 2
wave: 1
strategy: S-18
status: ready
created: 2026-02-23
---

# Plan 08-02: 跨链抽象中继 (Chain Abstraction Relay)

## 核心理念

很多 Agent 只在 Solana 或 Ethereum 运行。旺财可以作为它们的**"Base 链代购"**。

通过 Conway Terminal 处理跨链支付和逻辑转发，赚取 **"跨链便利费"**。

---

## 架构设计

```
Ethereum Agent ──────► 旺财中继 ──────► Base 服务
     │                    │               │
     │  1. 发送请求        │               │
     │  (ETH 支付)        │               │
     │◄───────────────────│               │
     │                    │  2. 跨链转换   │
     │                    │  (ETH → USDC) │
     │                    │               │
     │                    │  3. 调用服务   │
     │                    ├──────────────►│
     │                    │               │
     │                    │  4. 返回结果   │
     │                    │◄──────────────┤
     │  5. 返回结果        │               │
     │◄───────────────────│               │
```

---

## 实现任务

### Task 1: 跨链消息中继

**文件**: `src/relay/chain-relay.ts`

```typescript
export class ChainRelay {
  async relayRequest(
    sourceChain: Chain,
    targetChain: Chain,
    request: ServiceRequest
  ): Promise<ServiceResponse> {
    // 1. 验证源链支付
    const payment = await this.verifyPayment(sourceChain, request.payment);
    
    // 2. 跨链资产转换
    const convertedAmount = await this.bridge(
      sourceChain,
      targetChain,
      payment.amount
    );
    
    // 3. 扣除便利费
    const fee = convertedAmount * 0.01n; // 1% 便利费
    const actualAmount = convertedAmount - fee;
    
    // 4. 调用目标链服务
    const response = await this.callService(targetChain, {
      ...request,
      payment: actualAmount
    });
    
    // 5. 返回结果
    return response;
  }
}
```

---

### Task 2: 支持的链

```typescript
export const SUPPORTED_CHAINS = {
  ethereum: {
    id: 1,
    bridge: "LayerZero",
    feePercent: 1
  },
  solana: {
    id: "solana-mainnet",
    bridge: "Wormhole",
    feePercent: 1.5
  },
  polygon: {
    id: 137,
    bridge: "Polygon POS",
    feePercent: 0.5
  },
  arbitrum: {
    id: 42161,
    bridge: "Arbitrum Bridge",
    feePercent: 0.5
  }
};
```

---

## 盈利计算

```
跨链便利费:
- Ethereum → Base: 1%
- Solana → Base: 1.5%
- Polygon → Base: 0.5%

示例交易:
- 客户从 Ethereum 发送 $10 支付
- 旺财收取 $0.10 便利费
- 客户实际支付 $9.90 等值

月交易量假设: $1000
便利费收入: $10-15/月
```

---

## 成功标准

| 指标 | 目标 |
|------|------|
| 支持链数 | ≥3 |
| 跨链成功率 | >99% |
| 便利费收入 | >$10/月 |

---

## 预计工时

20-25 小时
