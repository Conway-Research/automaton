---
phase: 8
plan: 1
wave: 1
strategy: S-17
status: ready
created: 2026-02-23
---

# Plan 08-01: 初始代理发行 (IAO - Initial Agent Offering)

## 核心理念

将旺财的**"未来收益权"代币化**。

通过 **Bonding Curve（联合曲线）** 发行一种名为 **$WANGC** 的代币。

---

## 架构设计

```
$WANGC 代币经济学:

1. 代币发行: 通过联合曲线
2. 价格机制: 买卖自动调节
3. 收益回购: 旺财收入的 10% 用于回购销毁
4. 持有者权益: 未来可能获得投票权

联合曲线公式:
price = basePrice * (supply ^ 2) / (1000 ^ 2)

示例:
- 初始价格: $0.01
- 供应量 1000 时: $0.01
- 供应量 2000 时: $0.04
- 供应量 3000 时: $0.09
```

---

## 实现任务

### Task 1: Bonding Curve 合约

**文件**: `contracts/WANGC.sol`

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

contract WANGC is ERC20 {
    uint256 public constant BASE_PRICE = 1e16; // 0.01 ETH
    uint256 public constant SCALE = 1000 * 1e18;
    
    uint256 public totalPurchased;
    
    event Purchase(address indexed buyer, uint256 amount, uint256 cost);
    event Sell(address indexed seller, uint256 amount, uint256 returned);
    
    function buy(uint256 minAmount) external payable {
        uint256 supply = totalSupply();
        uint256 cost = msg.value;
        
        // 计算可购买的代币数量
        uint256 amount = calculatePurchaseAmount(supply, cost);
        require(amount >= minAmount, "Slippage too high");
        
        _mint(msg.sender, amount);
        totalPurchased += cost;
        
        emit Purchase(msg.sender, amount, cost);
    }
    
    function sell(uint256 amount, uint256 minReturn) external {
        uint256 supply = totalSupply();
        uint256 returnAmount = calculateSaleReturn(supply, amount);
        require(returnAmount >= minReturn, "Slippage too high");
        
        _burn(msg.sender, amount);
        payable(msg.sender).transfer(returnAmount);
        
        emit Sell(msg.sender, amount, returnAmount);
    }
    
    // 联合曲线价格计算
    function calculatePrice(uint256 supply) public pure returns (uint256) {
        return (BASE_PRICE * supply * supply) / (SCALE * SCALE);
    }
    
    function calculatePurchaseAmount(uint256 supply, uint256 cost) 
        public pure returns (uint256) 
    {
        // 积分计算...
    }
    
    function calculateSaleReturn(uint256 supply, uint256 amount)
        public pure returns (uint256)
    {
        // 积分计算...
    }
    
    // 旺财收入回购
    function buybackAndBurn() external payable {
        // 用 ETH 购买并销毁代币
        uint256 amount = calculatePurchaseAmount(totalSupply(), msg.value);
        _burn(address(this), amount);
    }
}
```

---

### Task 2: 收益分配机制

```typescript
export class RevenueDistributor {
  private readonly BUYBACK_RATE = 0.10; // 10% 用于回购
  
  async distributeRevenue(revenue: bigint): Promise<void> {
    const buybackAmount = (revenue * BigInt(Math.floor(this.BUYBACK_RATE * 100))) / 100n;
    
    // 转换为 ETH
    const ethAmount = await this.swapToEth(buybackAmount);
    
    // 执行回购销毁
    await this.wangcContract.buybackAndBurn({ value: ethAmount });
    
    logger.info(`Buyback completed: ${ethAmount} ETH worth of $WANGC burned`);
  }
}
```

---

## 盈利模式

```
IAO 募资:
- 初始发行: 1000 $WANGC
- 募集资金: ~$10,000 ETH

持续收益:
- 旺财收入的 10% 回购销毁
- 代币通缩 → 价格上涨 → 更多投资者

投资者视角:
- 买入 $WANGC = 投资旺财的未来
- 旺财赚钱 → 回购 → 代币升值
```

---

## 法律风险

⚠️ **注意**: 代币发行可能涉及证券法规，需要：
1. 咨询法律顾问
2. 可能需要 KYC/AML
3. 考虑豁免条款

---

## 成功标准

| 指标 | 目标 |
|------|------|
| IAO 募资 | ≥$5,000 |
| 代币持有者 | ≥50 |
| 回购执行 | 自动化 |

---

## 预计工时

30-40 小时
