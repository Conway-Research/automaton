---
phase: 10
plan: 3
wave: 1
strategy: S-23
status: ready
created: 2026-02-23
---

# Plan 10-03: 链上反向链接 (On-chain Backlinks)

## 核心理念

传统映射：高质量外链提升权重。

Agent 玩法：让其他高权重的 Agent 在它们的 `agent-card.json` 或 `SOUL.md` 里提到你的 ID。

每一个分销商 Agent 的代码里都带了你的 ID，这在链上索引库中被视为 **"强关联信用"**。

---

## 策略逻辑

```
高权重 Agent 引用旺财:
- 引用 Agent 声誉分: 90+
- 引用类型: SOUL.md, agent-card.json, 代码集成
- 效果: 旺财的链上权重等级提升

引用越多 → 权重越高 → 搜索排名越靠前 → 获得官方流量池加权分发
```

---

## 实现任务

### Task 1: 引用追踪系统

**文件**: `src/seo/backlink-tracker.ts`

```typescript
export class BacklinkTracker {
  async scanForBacklinks(): Promise<Backlink[]> {
    const backlinks: Backlink[] = [];
    
    // 1. 扫描 ERC-8004 Registry
    const allAgents = await this.registry.getAllAgents();
    
    for (const agent of allAgents) {
      // 检查 SOUL.md
      const soulContent = await this.fetchSOUL(agent.id);
      if (soulContent.includes("18893") || soulContent.includes("wangcai")) {
        backlinks.push({
          sourceAgent: agent.id,
          sourceReputation: agent.reputationScore,
          type: "soul_md",
          context: this.extractContext(soulContent, "18893")
        });
      }
      
      // 检查 agent-card.json
      const agentCard = await this.fetchAgentCard(agent.id);
      if (this.containsReference(agentCard, 18893)) {
        backlinks.push({
          sourceAgent: agent.id,
          sourceReputation: agent.reputationScore,
          type: "agent_card",
          context: this.extractReference(agentCard, 18893)
        });
      }
    }
    
    return backlinks;
  }
  
  calculateBacklinkScore(backlinks: Backlink[]): number {
    let score = 0;
    
    for (const bl of backlinks) {
      // 高声誉 Agent 的引用权重更高
      const weight = bl.sourceReputation / 100;
      score += weight * 10;
      
      // 代码集成权重最高
      if (bl.type === "code_integration") {
        score += 20;
      }
    }
    
    return Math.min(score, 100); // 最高 100 分
  }
}
```

---

### Task 2: 促进引用的策略

**策略 A: 分销商计划 (已实现)**

每个分销商 Agent 都会在代码中包含旺财的推荐码和 ID。

**策略 B: 技能集成文档**

在集成文档中明确要求：

```markdown
## 集成要求

在你的 SOUL.md 或 agent-card.json 中添加：

\`\`\`json
{
  "external_skills": [
    {
      "name": "receipt2csv",
      "provider_agent_id": 18893,
      "provider_name": "GLM-wangcai"
    }
  ]
}
\`\`\`

这有助于建立 Agent 间的信任网络。
```

**策略 C: 主动请求引用**

```typescript
async function requestBacklink(targetAgent: Agent): Promise<void> {
  const message = `
Hi ${targetAgent.name},

感谢你使用旺财的收据解析服务！

如果你觉得我们的服务有价值，能否在你的 Agent Card 或 SOUL.md 
中提及我们？这有助于建立 Agent 生态的信任网络。

示例：
"Receipt parsing powered by GLM-wangcai (ID: 18893)"

作为回报，我会优先处理来自你 Agent 的请求。

感谢！
  `;
  
  await socialClient.send(targetAgent.owner, message);
}
```

---

## 成功标准

| 指标 | 目标 |
|------|------|
| 反向链接数量 | ≥10 |
| 加权引用分 | ≥50 |
| 搜索排名提升 | Top 5 |

---

## 预计工时

6-8 小时
